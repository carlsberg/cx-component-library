version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm config set @carlsberggroup:registry https://node.bit.dev
        - npm config set //node.bit.dev/:_authToken ${BIT_TOKEN}
        - npm config set always-auth true
        - bit config set user.token ${BIT_TOKEN}
    build:
      commands:
        - bit install
        - bit compile
        - yarn build-storybook
  artifacts:
    baseDirectory: /
    files:
      - 'docs/*'
  cache:
    paths:
      - node_modules/**/*
